<!DOCTYPE html>
<html ng-app="app" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="bower_components/bootstrap/dist/css/bootstrap.css" rel="stylesheet" />
    <link href="bower_components/toastr/toastr.css" rel="stylesheet" />
    <link href="bower_components/select2/select2.css" rel="stylesheet" />
    <link href="css/site.css" rel="stylesheet" />
</head>
<body>
    <div ng-include src="'partials/header.html'"></div>
    <div class="container" ng-controller="GridController">
        <!-- Filters -->
        <div class="col-lg-12">
            <form role="form">
                <div class="form-group">
                    <label for="query">In Title</label>
                    <input type="text" ng-model="parameters.query" class="form-control" id="query" placeholder="Text included in the title of a question">
                </div>
                <div class="row">
                    <div class="form-group col-lg-8">
                        <label for="query">Included Tags</label>
                        <select ui-select2="tagOptions" multiple ng-model="parameters.includedTags">
                            <option ng-repeat="tag in tags.stackoverflow" value="{{tag.name}}">{{tag | tag}}</option>
                        </select>
                    </div>
                    <div class="form-group col-lg-4">
                        <label for="query">Excluded Tags</label>
                        <select ui-select2="tagOptions" multiple ng-model="parameters.excludedTags">
                            <option ng-repeat="tag in tags.stackoverflow" value="{{tag.name}}">{{tag | tag}}</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="controls-row">
                        <label class="control-label">Sort</label>
                        <select class="form-control" ng-model="parameters.sort">
                            <option value="creation">Creation Date</option>
                            <option value="votes">Votes</option>
                            <option value="activity">Last Activity Date</option>
                            <option value="relevance">Relevance</option>
                        </select>
                        <label class="radio inline">
                            <input type="radio" name="sortOrder" value="asc" ng-model="parameters.sortOrder" />
                            Ascending
                        </label>
                        <label class="radio inline">
                            <input type="radio" name="sortOrder" value="desc" ng-model="parameters.sortOrder" />
                            Descending
                        </label>
                    </div>
                </div>
                <button class="btn btn-primary" ng-disabled="feedOn" ng-click="initialize()">Initialize Feed</button>
                <button class="btn btn-success" ng-click="search()">Search</button>
            </form>
        </div>

        <!-- Grid -->
        <div>
            <div ng-if="feedOn" class="col-lg-12">
                <a ng-click="turnFeedOn">On</a>
                <a ng-click="turnFeedOff">Off</a>
                <div class="pull-right">
                    <label for="fromDate">Update Interval (Mins):</label>
                    <input type="number" name="updateInterval" ng-model="updateIntervalMins" />
                </div>
                <div class="pull-right">
                    <label>Last Update: {{lastUpdateDate | date:'HH:mm:ss'}}</label>
                </div>
            </div>
            <table class="table table-hover col-lg-12">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Tags</th>
                        <th class="text-center">Answered</th>
                        <th class="text-center">Answer Count</th>
                        <th class="text-center">View Count</th>
                        <th class="text-center">Votes</th>
                        <th class="text-center">Owner Reputation</th>
                        <th class="text-center">Accept Rate</th>
                    </tr>
                </thead>
                <tr ng-repeat="question in questions" ng-class="{danger: questionPreviouslyViewed(question.question_id)}">
                    <td><a ng-bind-html="question.title" ng-click="openQuestion(question)"></a></td>
                    <td ng-bind="question.tags"></td>
                    <td class="text-center"><span ng-show="question.is_answered" class="glyphicon glyphicon-ok icon-success"></span></td>
                    <td class="text-center"><span ng-show="question.answer_count" ng-bind=" question.answer_count | number"></span></td>
                    <td class="text-center"><span ng-show="question.view_count" ng-bind=" question.view_count | number"></span></td>
                    <td class="text-center"><span ng-show="question.score" ng-bind="question.score | number"></span></td>
                    <td class="text-center"><span ng-show="question.owner.reputation" ng-bind=" question.owner.reputation | number"></span></td>
                    <td class="text-center"><span ng-show="question.owner.accept_rate" ng-bind="question.owner.accept_rate + '%'"></span></td>
                </tr>
            </table>
        </div>
    </div>

    <!-- Vendor Scripts -->
    <!--<script src='https://api.stackexchange.com/js/2.0/all.js'></script>-->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/underscore/underscore.js"></script>
    <script src="bower_components/toastr/toastr.js"></script>
    <script src="bower_components/select2/select2.js"></script>
    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/angular-bootstrap/ui-bootstrap.js"></script>
    <script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
    <script src="bower_components/angular-sanitize/angular-sanitize.js"></script>
    <script src="bower_components/angular-ui-select2/src/select2.js"></script>

    <!-- Bootstrapping -->
    <script src="js/app.js"></script>

    <!-- controllers -->
    <script src="js/controllers/GridController.js"></script>
    <script src="js/controllers/FilterController.js"></script>
    <script src="js/controllers/HeaderController.js"></script>

    <!-- app Filters -->
    <script src="js/filters/tag.js"></script>

    <!-- app Services -->
    <script src="js/services/Identity.js"></script>
    <script src="js/services/StackProxy.js"></script>
    <script src="js/services/DataContext.js"></script>
    <script src="js/services/Notifier.js"></script>

    <!-- app Directives -->
    <!--<script type='text/javascript'>
        SE.init({
            clientId: 2874,
            key: 'fFGxJHjVNmw4u*YZqKNLlw((',
            channelUrl: 'http://localhost:2428/src/blank.html',
            complete: function (data) { console.log(data); }
        });
    </script>-->
</body>
</html>
